!function(){Vue.http.interceptors.push(function(t,s){t.credentials=!0,s()});new Vue({el:"body",data:{timer:null,domain:"http://www.yinzishao.cn:8000",status:{isSelecting:!0,isLoading:!1,isUploadImg:!1,selected:"",isSend:"",isGreen:!0,isFeeInfo:!1,isFeeInfoTrue:!1,isList:!0,isNoList:!1},mainData:[],detailedList:[],jsonData:[],para:{size:15,start:0}},ready:function(){this.render(),this.status.isLoading=!0},methods:{down:function(){this.form.size=5,this.para.start++,0!==this.jsonData.length&&this.render()},render:function(){var t=this;this.$http.post(this.domain+"/getDoneList",this.para,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(s){if(console.log(s.json()),0==s.json().success)console.log(s.json().error);else{this.jsonData=s.json();var i=s.json();if(0!=i.length){for(var e=0;e<i.length;e++)i[e].screenshot_path=this.domain+i[e].screenshot_path,"未处理"==i[e].result?i[e].isDeal=!1:i[e].isDeal=!0;var n=t.mainData.concat(i);this.$set("mainData",n)}else 0==this.mainData.length&&(this.status.isList=!1,this.status.isNoList=!0)}})},onUser:function(){window.location.href="./userAdministor.html"},onDeal:function(){this.status.isUploadImg=!1},onOther:function(){window.location.href="./other.html"},onDeal:function(t){this.status.selected=t;this.status.isUploadImg=!0,this.detailedList=this.mainData[t],"未处理"==this.mainData[t].result?(this.status.isSend="发送联系方式",this.status.isGreen=!0):(this.status.isSend="已发送",this.status.isGreen=!1)},onClose:function(){this.status.isUploadImg=!1},onSubmitMsg:function(t){var s=this.mainData[t];return"发送联系方式"!=this.status.isSend?(this.status.isUploadImg=!1,!1):void this.$http.post(this.domain+"/sendPhone",{tea_id:s.tea,oa_id:s.oa_id,tel:s.parent_tel},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(1==t.json().success){var i=this;this.status.isSend="已发送",s.isDeal=!1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){s.isDeal=!0,s.result="已成交",i.status.isUploadImg=!1},2e3)}})}}})}();