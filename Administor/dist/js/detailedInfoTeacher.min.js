!function(){Vue.http.interceptors.push(function(t,s){t.credentials=!0,s()});new Vue({el:"body",data:{domain:"http://www.yinzishao.cn",status:{isSelecting:!0,isLoading:!1,isTutorInfo:!1,selected:"",hot_not:"设为热门",isList:!0,isNoList:!1,text:"删除该请求",isEnlargeImg:!1,enlargeImg:""},msgDetailedList:{tea_id:"",certificate_photo:"../img/user02.png",name:"张先生",subject:"数学",subject_other:"",grade:"高一",place:"天河",time:"周六上午",native_place:"天河",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,tel:1234567891,self_comment:"特别受学生喜欢",score:"GDP棒棒",campus_major:"英语",teach_show_photo:["../img/user02.png","../img/user02.png","../img/user02.png"]},msgList:[],jsonData:[],start:0,id:0,detailedList:[]},ready:function(){this.getId(),this.renderTutor(),this.renderOrderData(),this.status.isLoading=!0},methods:{down:function(){this.start++,0!==this.jsonData.length&&this.renderOrderData()},getId:function(){var t=parseInt(this.getParam("listId"));this.id=t},renderOrderData:function(){this.status.isSelecting=!0,this.$http.post(this.domain+"/getUserOrders",{id:this.id,user:"teacher",start:this.start,size:6},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(console.log(t.json()),0==t.json().success)console.log(t.json().error);else{this.jsonData=t.json();var s=t.json();if(0!=s.length){for(var e=0;e<s.length;e++)"您已拒绝"==s[e].result||"家长已拒绝"==s[e].result?s[e].isRed=!0:s[e].isRed=!1;var i=this.msgList.concat(s);this.$set("msgList",i),this.status.isSelecting=!1}else 0==this.msgList.length&&(this.status.isNoList=!0,this.status.isList=!1)}})},grade_level:function(t){switch(t){case 0:return"";case 1:return"较为靠后";case 2:return"中等偏下";case 3:return"中等水平";case 4:return"中上水平";case 5:return"名列前茅"}},getParam:function(t){var s=location.search;if(s.indexOf("?")==-1)return"";s=s.substr(1,s.length).split("&");for(var e,i=0,o=s.length;i<o;i++)if(e=s[i].split("="),e[0]==t)return e[1];return!1},renderTutor:function(){this.$http.post(this.domain+"/getInfo",{id:this.id,format:!0,user:"teacher"},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(console.log(t.json()),0==t.json().sucess)console.log(t.json().error);else{var s=t.json();""!=s.certificate_photo&&null!=s.certificate_photo&&(s.certificate_photo=this.domain+s.certificate_photo);var e=s.teach_show_photo,i=e.length;if(i>0)for(var o=0;o<i;o++)e[o]=this.domain+e[o];this.$set("msgDetailedList",s),0==this.msgDetailedList.hot_not?this.status.hot_not="设为热门":this.status.hot_not="取消热门"}})},onReturn:function(){var t=this.getParam("keyword");"popularTeacher"==this.getParam("page")?window.location.href="./popularTeacher.html?keyword="+t:window.location.href="./userAdministor.html?user=teacher&keyword="+t},onUser:function(){window.location.href="./userAdministor.html"},onDeal:function(){window.location.href="./deal.html"},onOther:function(){window.location.href="./other.html"},onPopular:function(){var t,s;"设为热门"==this.status.hot_not?(t=1,s="取消热门"):(t=0,s="设为热门"),this.$http.post(this.domain+"/setHot",{id:this.id,type:t,user:"teacher"},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.json()),1==t.json().success?this.status.hot_not=s:console.log(t.json().error)})},onDetailedInfo:function(t){this.status.text="删除该请求",this.status.selected=t;var s=this.msgList[t];this.$http.post(this.domain+"/getParentInfo",{pd_id:s.pd,format:!0},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(0==t.json().success)console.log(t.json().error);else{var s=t.json();s.class_field=this.grade_level(s.class_field),this.detailedList=s,this.status.isTutorInfo=!0}})},onDelete:function(t){this.$http.post(this.domain+"/deleteOrder",{oa_id:this.msgList[t].oa_id},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(s){if(1==s.json().success){var e=this;this.status.text="该请求已删除",this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.msgList.splice(t,1),e.status.isTutorInfo=!1},800)}else console.log(s.json().error)})},showImg:function(t){this.status.enlargeImg=this.msgDetailedList.teach_show_photo[t],this.status.isEnlargeImg=!0},closeImg:function(){this.status.isEnlargeImg=!1},onClose:function(){this.status.isTutorInfo=!1}}})}();