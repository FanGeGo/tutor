!function(){Vue.http.interceptors.push(function(t,i){t.credentials=!0,i()});new Vue({el:"body",data:{domain:"http://www.yinzishao.cn/",timer:null,status:{isSelecting:!0,isLoading:!1,selected:"",isList:!0,isNoList:!1},jsonData:[],form:{size:18,start:0,hot:1,keyword:""},mainData:[],popularData:[]},ready:function(){location.search.indexOf("?")!=-1&&this.setOption(),this.renderData(),this.status.isLoading=!0},methods:{down:function(){this.form.size=5,this.form.start++,0!==this.jsonData.length&&this.renderData()},setOption:function(){var t=location.search;if(t.indexOf("?")!=-1){t=t.substr(1,t.length).split("&");for(var i,s=0,n=t.length;s<n;s++)i=t[s].split("="),"keyword"==i[0]&&(i[1]=decodeURIComponent(i[1])),this.form.keyword=i[1]}},renderData:function(){this.status.isSelecting=!0,this.$http.post(this.domain+"getTeachers",this.form,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(console.log(t.json()),0==t.json().success)console.log(t.json().error);else{this.jsonData=t.json();var i=t.json();if(0!=i.length){this.status.isNoList=!1,this.status.isList=!0;for(var s=0;s<i.length;s++)0==i[s].hot_not?i[s].info="设为热门":i[s].info="取消热门";var n=this.mainData.concat(i);this.$set("mainData",n),this.status.isSelecting=!1}else 0==this.mainData.length&&(this.status.isNoList=!0,this.status.isList=!1)}})},onReturn:function(){window.location.href="./other.html"},onUser:function(){window.location.href="./userAdministor.html"},onDeal:function(){window.location.href="./deal.html"},onOther:function(){window.location.href="./other.html"},onSearch:function(){this.form.start=0,this.mainData=[],this.form.size=18,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.renderData,200)},onPopular:function(t){var i;i="设为热门"==this.mainData[t].info?1:0,this.$http.post(this.domain+"setHot",{id:this.mainData[t].tea_id,type:i,user:"teacher"},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(s){console.log(s.json()),1==s.json().success?1==i?(this.mainData[t].info="取消热门",this.status.isSelecting=!0,this.popularData=this.mainData[t],this.mainData.splice(t,1),this.mainData.unshift(this.popularData),this.status.isSelecting=!1):this.mainData[t].info="设为热门":console.log(s.json().error)})},onDetailedInfo:function(t){window.location.href="./detailedInfoTeacher.html?page=popularTeacher&listId="+t+"&keyword="+this.form.keyword}}})}();