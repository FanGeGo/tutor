!function(){Vue.http.interceptors.push(function(t,e){t.credentials=!0,e()});new Vue({el:"body",data:{domain:"http://www.yinzishao.cn:8000",status:{isTutorInfo:!1,isSuccess:"",isDefault:"",isInfoTipOne:!1,selected:"",isRegister:"",isLoading:!1,errorTip:"对不起，您只能选择一位老师",getLocation:!1,isTutor:!0,isNoTutor:!1},recommendList:[{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"已邀请",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"已报名",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"已拒绝",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"已完成",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]},{tea_id:1,certificate_photo:"../img/user02.png",name:"张老师",isInvited:"",subject:"数学",subject_other:"",grade:"高一",distance:.6,native_place:"天河",time:"周六上午",place:"家长家",teacher_method:"nice,细心",teacher_method_other:"",expection:"上课要耐心细致",sex:"男",salary_bottom:20,salary_top:60,campus_major:"数学",score:"学习成绩进步很大",self_comment:"特别受学生喜欢",teach_show_photo:[]}],detailedList:[],jsonData:[],form:{size:9,start:0},location:{latitude:"",longitude:"",speed:"",accuracy:""},signature:""},ready:function(){this.renderData(),this.status.isLoading=!0},methods:{down:function(){this.form.start++,0!==this.jsonData.length&&this.renderData()},renderData:function(){this.$http.post(this.domain+"/",this.form,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(0==t.json().success)console.log(t.json().error);else{this.jsonData=t.json();var e=t.json();if(0!=e.length){for(var s=0;s<e.length;s++){""!=e[s].certificate_photo?e[s].certificate_photo=this.domain+e[s].certificate_photo:e[s].certificate_photo="../img/user02.png";for(var i=e[s].teach_show_photo,o=e[s].teach_show_photo.length,a=0;a<o;a++)i[a]=this.domain+i[a]}var n=this.recommendList.concat(e);this.$set("recommendList",n)}else 0==this.recommendList.length&&(this.status.isNoTutor=!0,this.status.isTutor=!1)}})},configuration:function(){var t=this;wx.config({debug:!0,appId:"wx6fe7f0568b75d925",timestamp:1482652615,nonceStr:"yinzishao",signature:t.signature,jsApiList:["getLocation"]})},getSignature:function(){this.$http.post(this.domain+"/",{timestamp:1482652615,nonceStr:"yinzishao"},{emulateJSON:!0,crossOrigin:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){this.signature=t.json().signature})},wxReady:function(){var t=this;wx.ready(function(){wx.getLocation({type:"wgs84",success:function(e){t.form.latitude=e.latitude,t.form.longitude=e.longitude,t.form.speed=e.speed,t.form.accuracy=e.accuracy,console.log("latitude : "+t.form.latitude+"--longitude : "+t.form.longitude+"--speed : "+t.form.speed+"--accuracy : "+t.form.accuracy)}})})},setLocation:function(){this.status.getLocation=!0,this.getSignature(),this.configuration(),this.wxReady()},onAllow:function(){this.$http.post(this.domain+"/",this.location,{emulateJSON:!0,crossOrigin:!0,headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(t){1==t.json().result&&(this.status.getLocation=!1)})},onCancel:function(){this.status.getLocation=!1},onRecommend:function(){this.status.isTutorInfo=!1},onMine:function(){window.location.href="./parentMyPage.html"},onAllTutor:function(){window.location.href="./parentAllTutor.html"},onTutorInfo:function(t){this.status.isTutorInfo=!0,this.status.selected=t,this.detailedList=this.recommendList[t],"已邀请"==this.recommendList[t].isInvited?(this.status.isDefault=!0,this.status.isSuccess=!1,this.status.isRegister="取消邀请"):"已报名"==this.recommendList[t].isInvited?(this.status.isDefault=!1,this.status.isSuccess=!0,this.status.isRegister="该老师已报名"):"已拒绝"==this.recommendList[t].isInvited?(this.status.isDefault=!0,this.status.isSuccess=!1,this.status.isRegister="该老师已拒绝"):"已完成"==this.recommendList[t].isInvited?(this.status.isDefault=!1,this.status.isSuccess=!0,this.status.isRegister="双方已成交"):(this.status.isDefault=!1,this.status.isSuccess=!0,this.status.isRegister="邀请老师")},onRegister1:function(t){var e,s,i;if("邀请老师"==this.status.isRegister)e=1,s="已邀请",i="邀请成功";else{if("取消邀请"!=this.status.isRegister)return!1;e=0,s="",i="取消成功"}this.$http.post(this.domain+"/inviteTeacher",{tea_id:this.recommendList[t].id,type:e},{emulateJSON:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){if(console.log(e.json()),1==e.json().success){this.status.isRegister=i;var o=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){o.recommendList[t].isInvited=s,o.status.isTutorInfo=!1},1e3)}else{console.log(e.json().error);var o=this;this.status.errorTip=e.json().error,this.status.isTutorInfo=!1,this.status.isInfoTipOne=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){o.status.isInfoTipOne=!1},1e3)}})},onClose:function(){this.status.isTutorInfo=!1}}})}();