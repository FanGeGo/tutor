!function(){window.localStorage.getItem("id");Vue.http.interceptors.push(function(s,t){s.credentials=!0,t()});new Vue({el:"body",data:{domain:"http://www.yinzishao.cn:8000/",msgList:[],status:{isFeedBack:!1,isLoading:!0,isSubmit:!1,isParent:"",isMsg:!0,isNoMsg:!1,selected:""},para:{size:22,start:0},jsonData:[],form:{tutorservice:"",appservice:"",rate:Number},xingList:[{key:!1},{key:!1},{key:!1},{key:!1},{key:!1}]},computed:{remindSubmit:function(){return""!=this.form.tutorservice&&""!=this.form.appservice&&this.form.rate!==Number}},ready:function(){this.renderData();var s=this.getParam();"parent"==s?this.status.isParent=!0:this.status.isParent=!1,this.status.isLoading=!1},methods:{down:function(){this.para.size=5,this.para.start++,0!==this.jsonData.length&&this.renderData()},renderData:function(){this.$http.post(this.domain+"getMsg",this.para,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(s){if(console.log(s.json()),0==s.json().success)console.log(s.json().error);else{this.jsonData=s.json();var t=s.json();if(0!==t.length){var i=this.msgList.concat(t);this.$set("msgList",i)}else 0==this.msgList.length&&(this.status.isMsg=!1,this.status.isNoMsg=!0)}})},getParam:function(){var s=location.search;return s=s.substr(1,s.length)},onShow:function(s){this.status.selected=s,0==this.msgList[s].status?this.$http.post(this.domain+"readMessage",{msg_id:this.msgList[s].msg_id},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.json()),1==t.json().success&&(this.msgList[s].status=!0,"好学吧家教邀请您填写反馈意见！"==this.msgList[s].message_title?this.status.isFeedBack=!0:this.msgList[s].isDetailed=!this.msgList[s].isDetailed)}):"好学吧家教邀请您填写反馈意见！"==this.msgList[s].message_title?1==this.msgList[s].isFeedBack?(this.msgList[s].message_content="您已填写！",this.msgList[s].isDetailed=!0):this.status.isFeedBack=!0:this.msgList[s].isDetailed=!this.msgList[s].isDetailed},onReturn:function(){var s=this.getParam();"teacher"==s?window.location.href="./teacherMyPage.html":window.location.href="./parentMyPage.html"},onXing:function(s){this.form.rate=s+1;for(var t=0;t<=s;t++)this.xingList[t].key=!0;for(var i=s+1;i<5;i++)this.xingList[i].key=!1},onFeedback:function(){return this.form.rate!==Number&&""!=this.form.tutorservice&&""!=this.form.appservice&&(this.status.isSubmit=!0,void this.$http.post(this.domain+"submitFeedBack",this.form,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(s){console.log(s.json()),this.status.isSubmit=!1,1==s.json().success?(this.msgList[this.status.selected].isFeedBack=!0,this.status.isFeedBack=!1):console.log(s.json().error)}))},onClose:function(){this.status.isFeedBack=!1}}})}();